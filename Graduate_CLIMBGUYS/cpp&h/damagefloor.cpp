// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
//
// ダメージ床[damagefloor.cpp]
// Author : FujiwaraMasato
//
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
//
// インクルードファイル
//
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
#include "damagefloor.h"
#include "rectcollision.h"

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
//
// マクロ定義
//
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
//#define DAMAGEFLOORCOLLISION_SIZE (30.0f)

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
//
// 静的変数宣言
//
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// イニシャライザコンストラクタ
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
CDamageFloor::CDamageFloor() : CScene_THREE::CScene_THREE()
{
}

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// デストラクタ処理
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
CDamageFloor::~CDamageFloor()
{
}

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// 初期化処理
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
void CDamageFloor::Init(void)
{
	// オフセットタイプ設定
	CScene_THREE::SetOffsetType(OFFSET_TYPE_SIDE_CENTER);
	// 色の設定
	//CScene_THREE::SetCol(D3DXCOLOR_CA(1.0f, 1.0f));

	// 透明にさせる
	CScene_THREE::SetCol(D3DXCOLOR(1.0f, 0.0f, 0.0f, 0.0f));

	// デバッグ時のみ赤く表示
#ifdef _DEBUG
	CScene_THREE::SetCol(D3DXCOLOR(1.0f, 0.0f, 0.0f, 0.5f));
#endif // _DEBUG

	D3DXVECTOR3 size(500.0,100.0,500.0f);
	D3DXVECTOR3 ofset(0.0, -50.0, 0.0f);

	CRectCollision::Create(size, ofset, CCollision::OBJTYPE_DAMAGEFLOOR,this,nullptr);

	// シーン3Dの初期化
	CScene_THREE::Init();
}

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// 終了処理
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
void CDamageFloor::Uninit(void)
{
	CScene_THREE::Uninit();
}

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// 更新処理
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
void CDamageFloor::Update(void)
{
	CScene_THREE::Update();
}

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// 描画処理
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
void CDamageFloor::Draw(void)
{
	// 描画
	CScene_THREE::Draw();
}

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// 作成処理
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
CDamageFloor * CDamageFloor::Create()
{
	// 変数宣言
	CDamageFloor * pDamageFloor;		// シーン3Dクラス
										// メモリの生成(初め->基本クラス,後->派生クラス)
	pDamageFloor = new CDamageFloor();
	// シーン管理設定
	pDamageFloor->ManageSetting(CScene::LAYER_3DOBJECT);
	// 位置設定
	pDamageFloor->SetPos(D3DXVECTOR3(0.0, 0.0f, 0.0f));
	// サイズ設定
	pDamageFloor->SetSize(FIELD_SIZE);
	// 初期化処理
	pDamageFloor->Init();
	// 生成したオブジェクトを返す
	return pDamageFloor;
}

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// 読み込み処理
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
HRESULT CDamageFloor::Load(void)
{
	return S_OK;
}

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// unload処理
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
void CDamageFloor::UnLoad(void)
{
}