// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
//
// プレイヤーUI[playerUI.cpp]
// Author : Yoshiki Sato
//
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
//
// インクルードファイル
//
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
#include "playerUI.h"
#include "player.h"
#include "basemode.h"
#include "debugproc.h"

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
//
// マクロ定義
//
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
#define PLAYER_UI_SIZE		(D3DXVECTOR3(45.0f, 30.0f, 0.0f))	// プレイヤーUIのサイズ

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
//
// 静的変数宣言
//
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// イニシャライザコンストラクタ
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
CPlayerUI::CPlayerUI() : CScene_THREE::CScene_THREE()
{
}

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// デストラクタ処理
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
CPlayerUI::~CPlayerUI()
{
}

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// 初期化処理
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
void CPlayerUI::Init(void)
{
	// オフセットタイプ設定
	CScene_THREE::SetOffsetType(OFFSET_TYPE_VERTICAL_CENTER);

	// 色
	CScene_THREE::SetCol(D3DXCOLOR(1.0f, 1.0f, 1.0f, 0.8f));

	// シーン3Dの初期化
	CScene_THREE::Init();
}

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// 終了処理
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
void CPlayerUI::Uninit(void)
{
	CScene_THREE::Uninit();
}

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// 更新処理
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
void CPlayerUI::Update(void)
{
	CScene_THREE::Update();
}

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// 描画処理
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
void CPlayerUI::Draw(void)
{	
	// 変数宣言
	LPDIRECT3DDEVICE9 pDevice = CManager::GetRenderer()->GetDevice(); // デバイスの取得

	// ビューマトリックスの代入用
	D3DXMATRIX mtxView;
	// 現在のビューマトリックスを取得
	pDevice->GetTransform(D3DTS_VIEW, &mtxView);
	// ビルボードの設定
	CCalculation::SetBillboard(&mtxView, &mtxView);
	//Zテスト通常
	CManager::GetRenderer()->SetType(CRenderer::TYPE_ZTEST_OFF);
	// 描画
	CScene_THREE::Draw();
	//Zテスト通常
	CManager::GetRenderer()->SetType(CRenderer::TYPE_ZTEST_DEFAULT);
}

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// 作成処理
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
CPlayerUI * CPlayerUI::Create(PLAYER_TAG PlayerTag)
{
	// 変数宣言
	CPlayerUI * pPlayerUI;		// シーン3Dクラス
	// メモリの生成(初め->基本クラス,後->派生クラス)
	pPlayerUI = new CPlayerUI();
	// シーン管理設定
	pPlayerUI->ManageSetting(CScene::LAYER_PLAYER_UI);
	// サイズ設定
	pPlayerUI->SetSize(PLAYER_UI_SIZE);
	// 初期化処理
	pPlayerUI->Init();
	// 各プレイヤーのテクスチャの貼り付け
	pPlayerUI->SetTexType(CTexture_manager::TYPE_PLAYER_UI_01 + (int)PlayerTag);
	// ビルボードの設定
	pPlayerUI->SetBillboard(true);
	// 生成したオブジェクトを返す
	return pPlayerUI;
}

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// 読み込み処理
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
HRESULT CPlayerUI::Load(void)
{
	return S_OK;
}

// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
// unload処理
// ----------------------------------------------------------------------------------------------------------------------------------------------------------------
void CPlayerUI::UnLoad(void)
{
}